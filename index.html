<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MELİKE NART - Sirk Token (Oku/Yaz)</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>

    <style>
        
        .magic-button {
            position: absolute; 
            left: 50%;
            transform: translateX(-50%); 
            width: 140px; height: 140px; border-radius: 50%; 
            background-color: red; border: none; cursor: pointer;
            font-size: 16px; color: white; font-weight: bold;
            box-shadow: 0 0 20px red, 0 0 40px orange, 0 0 60px yellow;
            transition: transform 0.3s, box-shadow 0.3s;
            animation: glow 2s infinite alternate, colorChange 5s infinite alternate;
        }
        .magic-button:hover { transform: translateX(-50%) scale(1.1); }

        /* Animasyonların (Değişiklik yok) */
        @keyframes glow { 0% { box-shadow: 0 0 20px red; } 100% { box-shadow: 0 0 40px red; } }
        @keyframes colorChange { 0% { background-color: red; } 50% { background-color: yellow; } 100% { background-color: red; } }

        /* Butonları Konumlandırma */
        #readButton { 
            top: 40%; 
            animation: glow 2s infinite alternate, colorChangeGreen 5s infinite alternate;
        }
        #writeButton { 
            top: 70%; 
        }

        
        @keyframes colorChangeGreen {
            0% { background-color: #b30332; } /* Koyu yeşil */
            50% { background-color: #cd325e; } /* Parlak yeşil */
            100% { background-color: #efacac; }
        }

       
        #message {
            position: absolute; top: 20%; left: 50%; /* Mesajı üste aldım */
            transform: translateX(-50%); color: white; font-size: 20px;
            font-weight: bold; text-shadow: 2px 2px 4px #000000;
            text-align: center;
        }
    </style>
</head>
<body style="
    margin: 0; padding: 0; min-height: 100vh;
    background-image: url('https://i.pinimg.com/1200x/33/2b/ae/332bae4dd3160afd34851227c8d89ef7.jpg');
    background-size: cover; background-position: center center;
    background-repeat: no-repeat; background-attachment: fixed; 
">

    <button class="magic-button" id="readButton">Bakiyemi Göster </button>
    <button class="magic-button" id="writeButton">10 Token Kazan </button>

    <h2 id="message">Lütfen önce bağlanmak için butonlardan birine basın.</h2>


<script>
   
    
   
    const contractAddress = "0xE78975dC91d1755175C23331Af6e55442edCc6E0"; 
    
   
    const contractABI = [ 
	{
		"inputs": [],
		"name": "getTenTokens",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"name": "balance",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "getMyBalance",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	}
]
       
    ;

    

    const readBtn = document.getElementById('readButton');
    const writeBtn = document.getElementById('writeButton');
    const messageDisplay = document.getElementById('message');

    let provider;
    let signer;
    let contract; 

   
    async function connectWallet() {
        if (contract) return true; 

        if (typeof window.ethereum === 'undefined') {
            alert("Lütfen MetaMask'i kurun.");
            return false;
        }
        try {
            provider = new ethers.providers.Web3Provider(window.ethereum);
            await provider.send("eth_requestAccounts", []);
            signer = provider.getSigner();
            contract = new ethers.Contract(contractAddress, contractABI, signer);
            messageDisplay.textContent = "Bağlandı! Şimdi işlem yapabilirsin.";
            return true;
        } catch (err) {
            alert("Bağlantı Hatası: " + err.message);
            return false;
        }
    }

    
    readBtn.addEventListener('click', async () => {
        if (!await connectWallet()) return; 

        try {
            const balance = await contract.getMyBalance();
            messageDisplay.textContent = `Şu anki bakiyen: ${balance.toString()} Token`;
        
        
        } catch (err) { 
            alert("Okuma Hatası: " + err.message);
        }
       
    });

   
    writeBtn.addEventListener('click', async () => {
        if (!await connectWallet()) return; 

        try {
            const tx = await contract.getTenTokens();
            
            messageDisplay.textContent = "Token alınıyor, lütfen onayla...";
            await tx.wait();
            messageDisplay.textContent = "Tebrikler! 10 Token kazandın!";

        } catch (err) {
            messageDisplay.textContent = "İşlem iptal edildi veya hata oluştu.";
            console.error(err.message);
        }
    });
</script>

</body>
</html>